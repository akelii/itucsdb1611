<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>AcademicFreelance | Registration Page</title>
    <link href=../static/admin_lte/img/favicon.ico rel=icon>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../static/admin_lte/css/AdminLTE.min.css">
    <link rel="stylesheet" href="../static/admin_lte/css/skins/_all-skins.css">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../static/admin_lte/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="../static/plugins/iCheck/square/blue.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="hold-transition register-page">
<div class="register-box">
    <div class="register-logo">
        <a href="{{ url_for('site.home_page') }}">AcademicFreelance</a>
    </div>

    <div class="register-box-body">
        <p class="login-box-msg">Register a new membership</p>
        <div class="form-group has-error">
            <span class="help-block" id="warning">{{ info }}</span>
        </div>
        <form name="registerForm" role="form" action="" method="POST" enctype="multipart/form-data"
              onsubmit="return checkForm()">
            <div class="form-group has-error" id="error" style="display: none">
                <span class="help-block">Please fill the missing information.</span>
            </div>
            <div class="form-group">
                <input type="text" class="form-control" name="firstName" placeholder="First name">
                <span class="glyphicon glyphicon-user form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback">
                <input type="text" class="form-control" name="lastName" placeholder="Last name">
                <span class="glyphicon glyphicon-user form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback">
                <select name="account" id="account" class="form-control">
                    <option value="-1">Select Account Type</option>
                    {% for foo in listAccount %}
                        <option value='{{ foo[0] }}'>{{ foo[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group has-feedback">
                <input type="email" class="form-control" name="eMail" placeholder="Email">
                <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback">
                <input type="password" class="form-control" name="pswd" placeholder="Password">
                <span class="glyphicon glyphicon-lock form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback">
                <input type="password" class="form-control" name="rePaswd" placeholder="Retype password">
                <span class="glyphicon glyphicon-log-in form-control-feedback"></span>
            </div>
            <!-- GENDER -->
            <div class="form-group has-feedback">
                <select name='title' id="title" class="form-control">
                    <option value="-1">Select Title</option>
                    {% for foo in listTitle %}
                        <option value='{{ foo[0] }}'>{{ foo[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="exampleInputFile">Profile Image</label>
                <input type="file" class="btn btn-default" id="" name="file" accept="image/*"/>
                <p class="help-block"> Help people find you by uploading profile photo!</p>
            </div>
            <div class="form-group">
                <div class="col-md-4">
                    <div class="iradio_minimal-blue checked">
                        <label>
                            <input name="r1" value="male" type="radio"> Male
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="iradio_minimal-blue">
                        <label>
                            <input name="r1" value="female" type="radio"> Female
                        </label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-8">
                    <div class="checkbox icheck">
                        <label>
                            You can read the <a data-toggle="modal" data-target="#myModal"
                                                href="#">terms</a> here.
                        </label>
                    </div>
                </div>
                <div class="col-xs-4">
                    <button type="submit" name="register" class="btn btn-primary btn-block btn-flat">Register</button>
                </div>
            </div>
        </form>
        <a href="{{ url_for('login_page') }}" class="text-center">I already have a membership</a>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Information</h4>
            </div>
            <div class="modal-body">
                It will better if you enroll with your corporate e-mail.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- jQuery 2.2.3 -->
<script src="../static/plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="../static/bootstrap/js/bootstrap.min.js"></script>
<!-- iCheck -->
<script src="../static/plugins/iCheck/icheck.min.js"></script>
<script>
    $(function () {
        $('input').iCheck({
            checkboxClass: 'icheckbox_square-blue',
            radioClass: 'iradio_square-blue',
            increaseArea: '20%' // optional
        });
    });


    {#    document.forms["registerForm"]["firstName"].parent().addClass("has-error");#}
    function checkPassword(str) {
        var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
        return re.test(str);
    }

    function checkForm() {
        var registerForm = document.forms["registerForm"];
        firstName = registerForm["firstName"];
        lastName = registerForm["lastName"];
        account = registerForm["account"];
        eMail = registerForm["eMail"];
        pswd = registerForm["pswd"];
        rePaswd = registerForm["rePaswd"];
        title = registerForm["title"];
        var count = 0;
        re = /[a-zA-Z]+/;

        if (firstName.value == "") {
            $('[name=firstName]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=firstName]').parent().removeClass("has-error");
        }
        if (lastName.value == "") {
            $('[name=lastName]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=lastName]').parent().removeClass("has-error");
        }
        if (account.value == "-1") {
            $('[name=account]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=account]').parent().removeClass("has-error");
        }
        if (eMail.value == "") {
            $('[name=eMail]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=eMail]').parent().removeClass("has-error");
        }
        if (pswd.value == "") {
            $('[name=pswd]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=pswd]').parent().removeClass("has-error");
        }
        if (rePaswd.value == "") {
            $('[name=rePaswd]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=rePaswd]').parent().removeClass("has-error");
        }
        if (title.value == "-1") {
            $('[name=title]').parent().addClass("has-error");
            ++count;
        }
        else {
            $('[name=title]').parent().removeClass("has-error");
        }
        if ($('input[name=r1]:checked').length > 0) {
            $('[name=r1]').parent().parent().parent().parent().parent().removeClass("has-error");
        }
        else {
            $('[name=r1]').parent().parent().parent().parent().parent().addClass("has-error");
            ++count
        }

        if (count > 0) {
            $("#error").show();
            return false;

        }
        else if(count == 0){
            $("#error").hide();
        }
        if (!re.test(firstName.value) || !re.test(lastName.value)) {
            $("#warning").text("First name and last name must contain only letters");
            return false;
        }
        else{
            $("#warning").text("");
        }
        if(pswd.value != rePaswd.value)
        {
            $("#warning").text("Your passwords must match");
            return false;
        }
        if(count == 0)
        {
            return true;
        }


        {#        if (form.pwd1.value != "" && form.pwd1.value == form.pwd2.value) {#}
        {#            if (!checkPassword(form.pwd1.value)) {#}
        {#                alert("The password you have entered is not valid!");#}
        {#                form.pwd1.focus();#}
        {#                return false;#}
        {#            }#}
        {#        } else {#}
        {#            alert("Error: Please check that you've entered and confirmed your password!");#}
        {#            form.pwd1.focus();#}
        {#            return false;#}
        {#        }#}
        return true;
    }


</script>
</body>
</html>